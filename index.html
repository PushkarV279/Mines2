<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mines - Predictor Edition</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #070b13; color: white; font-family: 'Inter', sans-serif; }
        .grid-cell { transition: all 0.15s ease-in-out; border: 2px solid #1e293b; }
        .grid-cell:active { transform: scale(0.9); }
        .sidebar { border-right: 1px solid #1e293b; background: #0f172a; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function MinesGame() {
            const [grid, setGrid] = useState(Array(25).fill(null));
            const [gameOver, setGameOver] = useState(false);
            const [gameStarted, setGameStarted] = useState(false);
            const [safeClicksRemaining, setSafeClicksRemaining] = useState(0);
            const [totalSafeClicks, setTotalSafeClicks] = useState(0);
            const [clickCount, setClickCount] = useState(0);

            const startGame = () => {
                // Generate a random number of safe clicks between 3 and 10
                const randomWinTarget = Math.floor(Math.random() * 8) + 3;
                setTotalSafeClicks(randomWinTarget);
                setSafeClicksRemaining(randomWinTarget);
                setClickCount(0);
                setGrid(Array(25).fill(null));
                setGameOver(false);
                setGameStarted(true);
            };

            const handleClick = (i) => {
                if (gameOver || grid[i] !== null || !gameStarted) return;

                const newGrid = [...grid];
                
                if (clickCount < totalSafeClicks) {
                    // GUARANTEED WIN ZONE
                    newGrid[i] = 'ðŸ’Ž';
                    setSafeClicksRemaining(prev => prev - 1);
                    setClickCount(prev => prev + 1);
                } else {
                    // THE TRAP - Next click is always a mine
                    newGrid[i] = 'ðŸ’£';
                    setGameOver(true);
                    // Fill the rest with mines to show the game ended
                    for(let j=0; j<25; j++) {
                        if(newGrid[j] === null) newGrid[j] = 'ðŸ’£';
                    }
                }
                setGrid(newGrid);
            };

            return (
                <div className="flex h-screen w-full overflow-hidden">
                    {/* SIDEBAR */}
                    <div className="sidebar w-64 p-6 flex flex-col justify-between hidden md:flex">
                        <div>
                            <h2 className="text-xl font-bold text-blue-500 mb-8 tracking-widest">PREDICTOR</h2>
                            <div className="bg-slate-900 p-4 rounded-lg border border-blue-900/50">
                                <p className="text-xs text-slate-400 uppercase mb-1">Guaranteed Wins</p>
                                <p className="text-4xl font-mono text-blue-400">
                                    {gameStarted ? totalSafeClicks : "--"}
                                </p>
                            </div>
                            <div className="mt-4 bg-slate-900 p-4 rounded-lg border border-green-900/50">
                                <p className="text-xs text-slate-400 uppercase mb-1">Clicks Remaining</p>
                                <p className="text-4xl font-mono text-green-400">
                                    {gameStarted ? safeClicksRemaining : "--"}
                                </p>
                            </div>
                        </div>
                        <div className="text-xs text-slate-500 italic">
                            System status: Connected to Node_04
                        </div>
                    </div>

                    {/* MAIN GAME AREA */}
                    <div className="flex-1 flex flex-col items-center justify-center bg-[#070b13] relative">
                        {/* Mobile Header (Since sidebar is hidden on small screens) */}
                        <div className="md:hidden mb-4 text-center">
                            <p className="text-blue-400 font-bold">WINS ALLOWED: {totalSafeClicks}</p>
                        </div>

                        <div className="grid grid-cols-5 gap-3 p-4 bg-slate-800/30 rounded-2xl border border-slate-700/50">
                            {grid.map((cell, i) => (
                                <div
                                    key={i}
                                    onClick={() => handleClick(i)}
                                    className={`w-14 h-14 sm:w-20 sm:h-20 flex items-center justify-center rounded-xl cursor-pointer text-3xl grid-cell shadow-lg ${
                                        cell === null ? 'bg-slate-800 hover:bg-slate-700' : 
                                        cell === 'ðŸ’£' ? 'bg-red-600 border-red-400' : 'bg-blue-600 border-blue-400 shadow-blue-500/20'
                                    }`}
                                >
                                    {cell}
                                </div>
                            ))}
                        </div>

                        <div className="mt-8 w-full max-w-xs px-4">
                            <button 
                                onClick={startGame}
                                className="w-full bg-blue-600 hover:bg-blue-500 py-4 rounded-xl font-black text-lg tracking-widest shadow-xl shadow-blue-600/20 active:scale-95 transition-all"
                            >
                                {gameOver || !gameStarted ? "INITIALIZE GAME" : "RESET SYSTEM"}
                            </button>
                            {gameOver && (
                                <p className="text-center mt-4 text-red-400 animate-pulse font-bold">SYSTEM OVERLOAD: MINE HIT</p>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<MinesGame />);
    </script>
</body>
</html>
